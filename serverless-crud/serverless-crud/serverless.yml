service: serverless-crud
# app and org for use with dashboard.serverless.com
app: serverless-crud
org: iamnajibradzuan

provider:
  name: aws
  runtime: nodejs12.x
  stage: dev
  region: ap-southeast-1
  functions:
    create:
      handler: handler.create
      events:
        - http:
            path: todos
            method: post
            cors: true
    readAll:
      handler: handler.readAll
      events:
        - http:
            path: todos
            method: get
            cors: true
    readOne:
      handler: handler.readOne
      events:
        - http:
            path: todos/{id}
            method: get
            cors: true
    update:
      handler: handler.update
      events:
        - http:
            path: todos/{id}
            method: put
            cors: true
    delete:
      handler: handler.delete
      events:
        - http:
            path: todos/{id}
            method: delete
            cors: true
  
  resources:
    Resources:
      TodosDynamoDbTable:
        Type: 'AWS::DynamoDB::Table'
        DeletionPolicy: Retain
        Properties:
          AttributeDefinitions:
            -
              AttributeName: id
              AttributeType: S
          KeySchema:
            -
              AttributeName: id
              KeyType: HASH
          ProvisionedThroughput:
            ReadCapacityUnits: 1
            WriteCapacityUnits: 1
          TableName: 'todos'